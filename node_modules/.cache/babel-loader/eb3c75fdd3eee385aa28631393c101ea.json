{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/shixt/Documents/user/\\u6700\\u7EC8\\u9879\\u76EE/tasty-admin/src/Common/PrivateRoute.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Route, Redirect, useHistory } from 'react-router-dom';\nimport { getStorage } from './utils'; // import { useSelector } from 'react-redux';\n\nexport default function PrivateRoute({\n  component: Component,\n  ...rest\n}) {\n  _s();\n\n  // const user=useSelector(state=>state.login.user)\n  const history = useHistory();\n  let auth = true;\n  let user = getStorage('user');\n  /* 当path为/时，已登录进admin，未登录进login */\n\n  if (rest.path === '/') {\n    if (user) {\n      history.push('/admin/restaurant');\n    } else {\n      auth = false;\n    }\n  }\n\n  if (rest.path === '/admin/order' && user === 'visitor') {\n    console.log('in');\n    history.push('/admin/restaurant');\n  } // /** 如果未登录 不可以进入除login以外页面 */\n\n\n  if (!user) {\n    if (rest.path !== '/login') {\n      auth = false;\n    }\n  } else {\n    auth = true;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Route, { ...rest,\n    render: () => {\n      // console.log(rest)\n      return auth ? /*#__PURE__*/_jsxDEV(Component, {\n        routes: rest.routes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 16\n      }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 52\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PrivateRoute, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n\n_c = PrivateRoute;\nPrivateRoute.propTypes = {\n  component: PropTypes.func\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"sources":["/Users/shixt/Documents/user/最终项目/tasty-admin/src/Common/PrivateRoute.js"],"names":["React","PropTypes","Route","Redirect","useHistory","getStorage","PrivateRoute","component","Component","rest","history","auth","user","path","push","console","log","routes","propTypes","func"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,KAAT,EAAeC,QAAf,EAAyBC,UAAzB,QAA2C,kBAA3C;AACA,SAASC,UAAT,QAA2B,SAA3B,C,CACA;;AAEA,eAAe,SAASC,YAAT,CAAuB;AAAEC,EAAAA,SAAS,EAAEC,SAAb;AAAyB,KAAGC;AAA5B,CAAvB,EAA2D;AAAA;;AACxE;AACA,QAAMC,OAAO,GAACN,UAAU,EAAxB;AACA,MAAIO,IAAI,GAAG,IAAX;AACA,MAAIC,IAAI,GAAGP,UAAU,CAAC,MAAD,CAArB;AAEA;;AACA,MAAGI,IAAI,CAACI,IAAL,KAAc,GAAjB,EAAqB;AACnB,QAAGD,IAAH,EAAQ;AACNF,MAAAA,OAAO,CAACI,IAAR,CAAa,mBAAb;AACD,KAFD,MAEK;AACHH,MAAAA,IAAI,GAAC,KAAL;AACD;AACF;;AAED,MAAGF,IAAI,CAACI,IAAL,KAAc,cAAd,IAA8BD,IAAI,KAAG,SAAxC,EAAkD;AAChDG,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAN,IAAAA,OAAO,CAACI,IAAR,CAAa,mBAAb;AACD,GAlBuE,CAoBxE;;;AACA,MAAG,CAACF,IAAJ,EAAS;AACP,QAAGH,IAAI,CAACI,IAAL,KAAc,QAAjB,EAA0B;AACxBF,MAAAA,IAAI,GAAG,KAAP;AACD;AACF,GAJD,MAIK;AACHA,IAAAA,IAAI,GAAG,IAAP;AACD;;AAED,sBAEE,QAAC,KAAD,OAAYF,IAAZ;AAAmB,IAAA,MAAM,EAAG,MAAI;AAC9B;AACA,aAEEE,IAAI,gBAAG,QAAC,SAAD;AAAW,QAAA,MAAM,EAAEF,IAAI,CAACQ;AAAxB;AAAA;AAAA;AAAA;AAAA,cAAH,gBAAuC,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAF7C;AAKD;AAPD;AAAA;AAAA;AAAA;AAAA,UAFF;AAYD;;GAzCuBX,Y;UAERF,U;;;KAFQE,Y;AA2CxBA,YAAY,CAACY,SAAb,GAAyB;AACvBX,EAAAA,SAAS,EAAEN,SAAS,CAACkB;AADE,CAAzB","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Route,Redirect, useHistory } from 'react-router-dom';\nimport { getStorage } from './utils';\n// import { useSelector } from 'react-redux';\n\nexport default function PrivateRoute ({ component: Component , ...rest }) {\n  // const user=useSelector(state=>state.login.user)\n  const history=useHistory()\n  let auth = true;\n  let user = getStorage('user');\n  \n  /* 当path为/时，已登录进admin，未登录进login */\n  if(rest.path === '/'){\n    if(user){\n      history.push('/admin/restaurant')\n    }else{\n      auth=false\n    }\n  }\n\n  if(rest.path === '/admin/order'&&user==='visitor'){\n    console.log('in')\n    history.push('/admin/restaurant')\n  }\n\n  // /** 如果未登录 不可以进入除login以外页面 */\n  if(!user){\n    if(rest.path !== '/login'){\n      auth = false;\n    }\n  }else{\n    auth = true;\n  }\n\n  return (\n\n    <Route { ...rest } render={ ()=>{\n      // console.log(rest)\n      return (\n\n        auth ? <Component routes={rest.routes}/> : <Redirect to='/login'></Redirect>\n      );\n\n    } } ></Route>\n\n  );\n}\n\nPrivateRoute.propTypes = {\n  component: PropTypes.func,\n};\n\n"]},"metadata":{},"sourceType":"module"}